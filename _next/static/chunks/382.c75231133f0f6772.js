"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{16453:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.useCookiesNext=t.useDeleteCookie=t.useGetCookie=t.useSetCookie=t.useHasCookie=t.useGetCookies=t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var a=r(66024),s=r(82750),u=r(12115),c=function(e){if(!(0,s.isClientSide)(e))throw Error("You are trying to access cookies on the server side. Please, use the server-side import with `cookies-next/server` instead.")},l=function(e){if(c(e),"server"!==(0,s.getRenderPhase)()){for(var t={},r=document.cookie?document.cookie.split("; "):[],o=0,i=r.length;o<i;o++){var n=r[o].split("="),a=n.slice(1).join("=");t[n[0]]=a}return t}};t.getCookies=l;var d=function(e,t){c(t);var r=l(t),o=null==r?void 0:r[e];if(void 0!==o)return(0,s.decode)(o)};t.getCookie=d;var f=function(e,t,r){if(c(r),"server"!==(0,s.getRenderPhase)()){var i=(0,a.serialize)(e,(0,s.stringify)(t),o({path:"/"},r||{}));document.cookie=i}};t.setCookie=f;var h=function(e,t){c(t),f(e,"",o(o({},t),{maxAge:-1}))};t.deleteCookie=h;var p=function(e,t){if(c(t),!e)return!1;var r=l(t);return!!r&&Object.prototype.hasOwnProperty.call(r,e)};t.hasCookie=p;var g=function(e){var t=(0,u.useState)(!1),r=t[0],o=t[1];return(0,u.useEffect)(function(){o(!0)},[]),r?e:function(){}},v=function(){return g(l)};t.useGetCookies=v;var b=function(){return g(d)};t.useGetCookie=b;var k=function(){return g(p)};t.useHasCookie=k;var y=function(){return g(f)};t.useSetCookie=y;var x=function(){return g(h)};t.useDeleteCookie=x,t.useCookiesNext=function(){return{getCookies:v(),getCookie:b(),hasCookie:k(),setCookie:y(),deleteCookie:x()}},n(r(48954),t)},24382:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var o=r(95155),i=r(12115),n=r(29270),a=r(11854),s=r(28920),u=r(79971),c=r(67755);let l=()=>{let[e,t]=(0,i.useState)(!1),[r,l]=(0,i.useState)(""),[d,f]=(0,i.useState)(!1),[h,p]=(0,i.useState)([]),[g,v]=(0,i.useState)(!1),b=c.C.chatbot.rateLimit,k=Date.now(),y=e=>{l(e.target.value)},x=async()=>{if(""===r.trim())return;let e=parseInt((0,u.getCookie)("requestCount"))||0;if(k-(parseInt((0,u.getCookie)("lastRequestTime"))||Date.now())>=6e4&&((0,u.setCookie)("requestCount","0",{maxAge:60}),(0,u.setCookie)("lastRequestTime",k.toString(),{maxAge:60})),e>=b){v(!0);return}let t=[...h,{text:r.trim(),sender:"user"}];p(t),f(!0),(0,u.setCookie)("requestCount",(e+1).toString(),{maxAge:60});try{let e=await fetch("/api/fetch-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r.trim()})});if(!e.ok)throw Error("Failed to fetch response");let o=await e.json();p([...t,{text:o.response,sender:"bot"}])}catch(e){console.error("Error:",e),p([...t,{text:"Sorry, something went wrong. Please try again later.",sender:"bot"}])}finally{f(!1),l("")}};return(0,i.useEffect)(()=>{if(!e)return;let t=parseInt((0,u.getCookie)("requestCount"))||0;parseInt((0,u.getCookie)("lastRequestTime"))||Date.now(),t>=b&&v(!0),0===h.length&&p([{text:"Hello, how can I assist you today?",sender:"bot"}])},[e,h.length,b]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"fixed bottom-16 right-6 z-50 p-4 bg-black dark:bg-white dark:text-white text-black rounded-full shadow-lg cursor-pointer transition-all duration-300 transform ".concat(e?"rotate-180":""),onClick:()=>{t(!e)},children:(0,o.jsx)("span",{className:"text-2xl",children:e?"❌":"\uD83D\uDE80"})}),e&&(0,o.jsxs)("div",{className:"fixed bottom-36 right-6 sm:right-8 w-80 sm:w-[300px] bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-300 dark:border-gray-600 flex flex-col h-[500px] sm:h-[400px]",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Chatbot"})}),(0,o.jsx)("div",{className:"mt-4 flex-grow overflow-y-auto max-h-[60%] sm:max-h-[70%] pr-2 custom-scrollbar",children:h.map((e,t)=>(0,o.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"," mb-2"),children:(0,o.jsx)("div",{className:"p-2 max-w-[70%] rounded-lg text-sm ".concat("user"===e.sender?"bg-blue-500 text-white":"bg-gray-300 text-black dark:bg-gray-600 dark:text-white"),children:e.text})},t))}),(0,o.jsxs)("div",{className:"mt-2 flex flex-col items-center justify-center gap-2",children:[(0,o.jsx)(n.P,{className:"w-[80%] mx-auto p-2 rounded-md text-sm dark:text-white dark:caret-white caret-black text-black",placeholder:"Type a message...",value:r,onChange:e=>y(e)}),(0,o.jsx)(a.T,{className:"w-[80%] mx-auto bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700",onPress:x,disabled:d||g,children:d?(0,o.jsx)(s.o,{color:"default",size:"sm"}):"Send"})]})]}),g&&(0,o.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black/60 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-lg text-center",children:[(0,o.jsx)("h3",{className:"font-bold text-lg text-foreground dark:text-white mb-4",children:"Rate Limit Reached! \uD83D\uDE2C"}),(0,o.jsx)("p",{className:"text-base text-foreground dark:text-gray-400",children:"You have reached the rate limit of 10 messages per minute. Please wait before sending another request!⏳."}),(0,o.jsx)(a.T,{onPress:()=>v(!1),className:"mt-4 px-4 py-2 rounded-xl bg-black text-white dark:bg-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-200 transition ease",children:"Close"})]})})]})}},29270:(e,t,r)=>{r.d(t,{P:()=>E});var o=r(77498),i=r(672),n=r(56973),a=r(81627),s=r(12115);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(null,arguments)}var c=s.useLayoutEffect,l=function(e){var t=s.useRef(e);return c(function(){t.current=e}),t},d=function(e,t){if("function"==typeof e){e(t);return}e.current=t},f=function(e,t){var r=s.useRef();return s.useCallback(function(o){e.current=o,r.current&&d(r.current,null),r.current=t,t&&d(t,o)},[t])},h={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},p=function(e){Object.keys(h).forEach(function(t){e.style.setProperty(t,h[t],"important")})},g=null,v=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},b=function(){},k=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],y=!!document.documentElement.currentStyle,x=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=k.reduce(function(e,r){return e[r]=t[r],e},{}),o=r.boxSizing;if(""===o)return null;y&&"border-box"===o&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),n=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:n}};function m(e,t,r){var o=l(r);s.useLayoutEffect(function(){var r=function(e){return o.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var C=function(e){m(window,"resize",e)},w=function(e){m(document.fonts,"loadingdone",e)},j=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],S=s.forwardRef(function(e,t){var r=e.cacheMeasurements,o=e.maxRows,i=e.minRows,n=e.onChange,a=void 0===n?b:n,c=e.onHeightChange,l=void 0===c?b:c,d=function(e,t){if(null==e)return{};var r={};for(var o in e)if(({}).hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,j),h=void 0!==d.value,k=s.useRef(null),y=f(k,t),m=s.useRef(0),S=s.useRef(),O=function(){var e,t,n,a,s,u,c,d,f,h,b,y=k.current,C=r&&S.current?S.current:x(y);if(C){S.current=C;var w=(e=y.value||y.placeholder||"x",void 0===(t=i)&&(t=1),void 0===(n=o)&&(n=1/0),g||((g=document.createElement("textarea")).setAttribute("tabindex","-1"),g.setAttribute("aria-hidden","true"),p(g)),null===g.parentNode&&document.body.appendChild(g),a=C.paddingSize,s=C.borderSize,c=(u=C.sizingStyle).boxSizing,Object.keys(u).forEach(function(e){g.style[e]=u[e]}),p(g),g.value=e,d=v(g,C),g.value=e,d=v(g,C),g.value="x",h=(f=g.scrollHeight-a)*t,"border-box"===c&&(h=h+a+s),d=Math.max(h,d),b=f*n,"border-box"===c&&(b=b+a+s),[d=Math.min(b,d),f]),j=w[0],O=w[1];m.current!==j&&(m.current=j,y.style.setProperty("height",j+"px","important"),l(j,{rowHeight:O}))}};return s.useLayoutEffect(O),C(O),w(O),s.createElement("textarea",u({},d,{onChange:function(e){h||O(),a(e)},ref:y}))}),O=r(1529),P=r(95155),_=(0,n.Rf)((e,t)=>{let{style:r,minRows:n=3,maxRows:u=8,cacheMeasurements:c=!1,disableAutosize:l=!1,onHeightChange:d,...f}=e,{Component:h,label:p,description:g,startContent:v,endContent:b,hasHelper:k,shouldLabelBeOutside:y,shouldLabelBeInside:x,isInvalid:m,errorMessage:C,getBaseProps:w,getLabelProps:j,getInputProps:_,getInnerWrapperProps:E,getInputWrapperProps:N,getHelperWrapperProps:z,getDescriptionProps:R,getErrorMessageProps:A,isClearable:T,getClearButtonProps:q}=(0,o.G)({...f,ref:t,isMultiline:!0}),[H,M]=(0,s.useState)(n>1),[D,L]=(0,s.useState)(!1),F=p?(0,P.jsx)("label",{...j(),children:p}):null,G=_(),I=l?(0,P.jsx)("textarea",{...G,style:(0,a.v)(G.style,null!=r?r:{})}):(0,P.jsx)(S,{...G,cacheMeasurements:c,"data-hide-scroll":(0,i.sE)(!D),maxRows:u,minRows:n,style:(0,a.v)(G.style,null!=r?r:{}),onHeightChange:(e,t)=>{1===n&&M(e>=2*t.rowHeight),u>n&&L(e>=u*t.rowHeight),null==d||d(e,t)}}),$=(0,s.useMemo)(()=>T?(0,P.jsx)("button",{...q(),children:(0,P.jsx)(O.o,{})}):null,[T,q]),W=(0,s.useMemo)(()=>v||b?(0,P.jsxs)("div",{...E(),children:[v,I,b]}):(0,P.jsx)("div",{...E(),children:I}),[v,G,b,E]),B=m&&C,U=B||g;return(0,P.jsxs)(h,{...w(),children:[y?F:null,(0,P.jsxs)("div",{...N(),"data-has-multiple-rows":(0,i.sE)(H),children:[x?F:null,W,$]}),k&&U?(0,P.jsx)("div",{...z(),children:B?(0,P.jsx)("div",{...A(),children:C}):(0,P.jsx)("div",{...R(),children:g})}):null]})});_.displayName="NextUI.Textarea";var E=_},48954:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},66024:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e,t){let r=new s,o=e.length;if(o<2)return r;let i=t?.decode||l,n=0;do{let t=e.indexOf("=",n);if(-1===t)break;let a=e.indexOf(";",n),s=-1===a?o:a;if(t>s){n=e.lastIndexOf(";",t-1)+1;continue}let l=u(e,n,t),d=c(e,t,l),f=e.slice(l,d);if(void 0===r[f]){let o=u(e,t+1,s),n=c(e,s,o),a=i(e.slice(o,n));r[f]=a}n=s+1}while(n<o);return r},t.serialize=function(e,t,s){let u=s?.encode||encodeURIComponent;if(!r.test(e))throw TypeError(`argument name is invalid: ${e}`);let c=u(t);if(!o.test(c))throw TypeError(`argument val is invalid: ${t}`);let l=e+"="+c;if(!s)return l;if(void 0!==s.maxAge){if(!Number.isInteger(s.maxAge))throw TypeError(`option maxAge is invalid: ${s.maxAge}`);l+="; Max-Age="+s.maxAge}if(s.domain){if(!i.test(s.domain))throw TypeError(`option domain is invalid: ${s.domain}`);l+="; Domain="+s.domain}if(s.path){if(!n.test(s.path))throw TypeError(`option path is invalid: ${s.path}`);l+="; Path="+s.path}if(s.expires){var d;if(d=s.expires,"[object Date]"!==a.call(d)||!Number.isFinite(s.expires.valueOf()))throw TypeError(`option expires is invalid: ${s.expires}`);l+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.partitioned&&(l+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${s.sameSite}`)}return l};let r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function u(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function c(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function l(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},79971:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.useCookiesNext=t.useDeleteCookie=t.useGetCookie=t.useSetCookie=t.useHasCookie=t.useGetCookies=t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var n=r(16453),a=r(85961);i(r(48954),t);var s=r(82750);t.getCookies=function(e){return(0,s.isClientSide)(e)?n.getCookies(e):a.getCookies(e)},t.getCookie=function(e,t){return(0,s.isClientSide)(t)?n.getCookie(e,t):a.getCookie(e,t)},t.setCookie=function(e,t,r){return(0,s.isClientSide)(r)?n.setCookie(e,t,r):a.setCookie(e,t,r)},t.deleteCookie=function(e,t){return(0,s.isClientSide)(t)?n.deleteCookie(e,t):a.deleteCookie(e,t)},t.hasCookie=function(e,t){return(0,s.isClientSide)(t)?n.hasCookie(e,t):a.hasCookie(e,t)};var u=r(16453);Object.defineProperty(t,"useGetCookies",{enumerable:!0,get:function(){return u.useGetCookies}}),Object.defineProperty(t,"useHasCookie",{enumerable:!0,get:function(){return u.useHasCookie}}),Object.defineProperty(t,"useSetCookie",{enumerable:!0,get:function(){return u.useSetCookie}}),Object.defineProperty(t,"useGetCookie",{enumerable:!0,get:function(){return u.useGetCookie}}),Object.defineProperty(t,"useDeleteCookie",{enumerable:!0,get:function(){return u.useDeleteCookie}}),Object.defineProperty(t,"useCookiesNext",{enumerable:!0,get:function(){return u.useCookiesNext}})},82750:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderPhase=t.isClientSide=t.decode=t.stringify=void 0,t.stringify=function(e){try{if("string"==typeof e)return e;return JSON.stringify(e)}catch(t){return e}},t.decode=function(e){return e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e},t.isClientSide=function(e){return!(null==e?void 0:e.req)&&!(null==e?void 0:e.res)&&!(e&&"cookies"in e&&(null==e?void 0:e.cookies))},t.getRenderPhase=function(){return"undefined"==typeof window?"server":"client"}},85961:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},a=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function a(e){try{u(o.next(e))}catch(e){n(e)}}function s(e){try{u(o.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,o,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(s){return function(u){return function(s){if(r)throw TypeError("Generator is already executing.");for(;n&&(n=0,s[0]&&(a=0)),a;)try{if(r=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},u=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var c=r(66024),l=r(82750),d=function(e){if((0,l.isClientSide)(e))throw Error("You are trying to access cookies on the client side. Please, use the client-side import with `cookies-next/client` instead.")},f=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},h=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&f(e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&f(e.res.cookies)||!!e&&"cookies"in e&&"function"==typeof e.cookies},p=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,o=e.value;t[r]=o}),t},g=function(e){return a(void 0,void 0,void 0,function(){var t,r;return s(this,function(o){switch(o.label){case 0:if(d(e),!h(e))return[3,2];if(e.req)return[2,p(e.req.cookies)];if(e.res)return[2,p(e.res.cookies)];if(!e.cookies)return[3,2];return t=p,[4,e.cookies()];case 1:return[2,t.apply(void 0,[o.sent()])];case 2:if((null==e?void 0:e.req)&&(r=e.req),null==r?void 0:r.cookies)return[2,r.cookies];if(null==r?void 0:r.headers.cookie)return[2,(0,c.parse)(r.headers.cookie)];return[2,{}]}})})};t.getCookies=g,t.getCookie=function(e,t){return a(void 0,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:return d(t),[4,g(t)];case 1:if(void 0===(r=o.sent()[e]))return[2,void 0];return[2,(0,l.decode)(r)]}})})};var v=function(e,t,r){return a(void 0,void 0,void 0,function(){var i,n,a,f,p,g,v,b,k,y,x,m,C,w,j;return s(this,function(s){switch(s.label){case 0:if(d(r),!h(r))return[3,3];if(i=r.req,n=r.res,a=r.cookies,f=u(r,["req","res","cookies"]),p=o({name:e,value:(0,l.stringify)(t)},f),i&&i.cookies.set(p),n&&n.cookies.set(p),!a)return[3,2];return[4,a()];case 1:s.sent().set(p),s.label=2;case 2:return[2];case 3:return g={},r&&(y=(k=r).req,x=k.res,m=u(k,["req","res"]),v=y,b=x,g=m),C=(0,c.serialize)(e,(0,l.stringify)(t),o({path:"/"},g)),b&&v&&(Array.isArray(w=b.getHeader("Set-Cookie"))||(w=w?[String(w)]:[]),b.setHeader("Set-Cookie",w.concat(C)),v&&v.cookies&&(j=v.cookies,""===t?delete j[e]:j[e]=(0,l.stringify)(t)),v&&v.headers&&v.headers.cookie&&(j=(0,c.parse)(v.headers.cookie),""===t?delete j[e]:j[e]=(0,l.stringify)(t),v.headers.cookie=Object.entries(j).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},""))),[2]}})})};t.setCookie=v,t.deleteCookie=function(e,t){return a(void 0,void 0,void 0,function(){return s(this,function(r){return d(t),[2,v(e,"",o(o({},t),{maxAge:-1}))]})})},t.hasCookie=function(e,t){return a(void 0,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:if(d(t),!e)return[2,!1];return[4,g(t)];case 1:return[2,r.sent().hasOwnProperty(e)]}})})},n(r(48954),t)}}]);